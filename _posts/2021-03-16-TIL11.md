---
title : "[TIL]KDT팀프로젝트2021/03/16"
data : 2021-03-16 00:15:28 -0400
categories : 프로그래머스인공지능스쿨
use_math: true
---
코랩 런타임이 재설정되면 resume=true로 해서 이전에 학습한 pth 전달받아 다시 학습하는게 안된다.  

```python
# cfg.MODEL.WEIGHTS = model_zoo.get_checkpoint_url(cfg_filepath)  
cfg.MODEL.WEIGHTS = "/content/output/model_final.pth"
```

위와 같이 바꾸거나  
<https://github.com/facebookresearch/detectron2/issues/148> 여기에서 Arnavdas라는 사람이 쓴 것대로 하면 이어받아서 돌아가긴 하는데 iteration이 0부터 시작한다.  
코랩 output 폴더에 'last_checkpoint' 파일을 열어보니 model_0004999.pth가 적혀있었다. cfg 디폴트값이 5000 iteration마다 pth를 저장하게 되어있어서 지금껏 1만번 돌리면 저 pth파일이 두개씩 생기던 거였다!! 뭔가 했는데!  last_checkpoint파일 안에 model_0004999.pth 대신 model_final.pth을 집어넣으면 되지 않을지…->성공! iteration이 이전 pth에서 끝난 것을 넘겨받아 학습이 진행된다.  